{"version":3,"file":"page-CiEKdONC.js","sources":["../../src/components/editors/JsonEditor.tsx","../../src/pages/editors/generic/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport toast from 'react-hot-toast';\n\ninterface JsonEditorProps {\n    initialData: any;\n    onSave: (data: any) => void;\n    title?: string;\n}\n\nexport default function JsonEditor({ initialData, onSave, title = \"Content Editor\" }: JsonEditorProps) {\n    const [jsonString, setJsonString] = useState('');\n    const [isValid, setIsValid] = useState(true);\n\n    useEffect(() => {\n        if (initialData) {\n            setJsonString(JSON.stringify(initialData, null, 2));\n        }\n    }, [initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        const value = e.target.value;\n        setJsonString(value);\n\n        try {\n            JSON.parse(value);\n            setIsValid(true);\n        } catch (error) {\n            setIsValid(false);\n        }\n    };\n\n    const handleSave = () => {\n        try {\n            const parsed = JSON.parse(jsonString);\n            onSave(parsed);\n            toast.success('Content updated successfully!');\n        } catch (error) {\n            toast.error('Invalid JSON. Please fix errors before saving.');\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-2xl font-bold text-white\">{title}</h2>\n                <button\n                    onClick={handleSave}\n                    disabled={!isValid}\n                    className={`px-6 py-2 font-semibold rounded-lg transition-all whitespace-nowrap flex items-center ${isValid\n                            ? 'bg-gradient-to-r from-amber-600 to-amber-500 text-white hover:from-amber-700 hover:to-amber-600'\n                            : 'bg-gray-700 text-gray-500 cursor-not-allowed'\n                        }`}\n                >\n                    <i className=\"ri-save-line mr-2\"></i>\n                    Save JSON\n                </button>\n            </div>\n\n            <div className=\"bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-xl p-6\">\n                <div className=\"mb-4\">\n                    <div className={`text-sm mb-2 ${isValid ? 'text-green-500' : 'text-red-500'}`}>\n                        {isValid ? 'Valid JSON' : 'Invalid JSON Syntax'}\n                    </div>\n                    <textarea\n                        value={jsonString}\n                        onChange={handleChange}\n                        className={`w-full h-[600px] font-mono text-sm p-4 bg-gray-950 border rounded-lg focus:outline-none focus:ring-2 ${isValid ? 'border-gray-700 focus:ring-amber-500 text-gray-300' : 'border-red-500 focus:ring-red-500 text-red-300'\n                            }`}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n}\n","import { useState, useEffect } from 'react';\nimport JsonEditor from '../../../components/editors/JsonEditor';\nimport { contentAPI } from '../../../utils/api';\nimport toast from 'react-hot-toast';\n\ninterface GenericPageEditorProps {\n    pageKey: string;\n    title: string;\n}\n\nexport default function GenericPageEditor({ pageKey, title }: GenericPageEditorProps) {\n    const [data, setData] = useState<any>(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        loadData();\n    }, [pageKey]);\n\n    const loadData = async () => {\n        try {\n            setLoading(true);\n            const content = await contentAPI.getContent(pageKey);\n            setData(content);\n        } catch (error) {\n            console.error(`Failed to load ${pageKey} data:`, error);\n            toast.error('Failed to load content');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleSave = async (newData: any) => {\n        try {\n            await contentAPI.updateContent(pageKey, newData);\n            setData(newData);\n            // toast success handled by JsonEditor or here? \n            // JsonEditor has a toast, but keeping it here is better for consistency. \n            // JsonEditor only toasts validation. \n            // Actually JsonEditor toasts \"Content updated successfully\" in my code.\n        } catch (error) {\n            console.error('Failed to save data:', error);\n            toast.error('Failed to save changes');\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-screen\">\n                <div className=\"text-center\">\n                    <i className=\"ri-loader-4-line text-4xl text-amber-500 animate-spin\"></i>\n                    <p className=\"text-gray-400 mt-4\">Loading content...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"p-8\">\n            <JsonEditor\n                initialData={data}\n                onSave={handleSave}\n                title={title}\n            />\n        </div>\n    );\n}\n"],"names":["JsonEditor","initialData","onSave","title","jsonString","setJsonString","useState","isValid","setIsValid","useEffect","handleChange","e","value","handleSave","parsed","toast","jsxs","jsx","GenericPageEditor","pageKey","data","setData","loading","setLoading","loadData","content","contentAPI","error","newData"],"mappings":"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"}